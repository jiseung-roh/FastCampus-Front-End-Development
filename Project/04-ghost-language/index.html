<!DOCTYPE html>
<html lang="ko-KR" dir="ltr">
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge">
	<meta charset="UTF-8">
	<title>ghost Translate</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="ghost translator">
	<meta name="author" content="jiseung roh">
</head>
<body>
	<h1>고스트어 번역기</h1>
	<textarea rows="4" class="ghost" placeholder="고스트어로 변환할 문장을 입력해주세요."></textarea>
	<button type="button" class="change">변환</button>
	<div class="result"></div>
		
	</textarea>
	
	<script type="text/javascript" src="https://code.jquery.com/jquery-3.0.0.min.js"></script>
	<script src="js/hangul.js" type="text/javascript"></script>
	<script type="text/javascript">

		var str= "지승";

		var ghost = function(str){
			return str.split("").map(function(char) { //문자열을 받아서 그걸 하나하나로 쪼개서 i처럼 보내준다.
				var ghost_word = Hangul.disassemble(char); // 하나하나 쪼개준 단어를 하나 받아와서 그걸 해체한다.
				// 귀신어 변환 시작!
				// 두번째 자음이 없는 경우를 골라내야해.
				for (var i=0; i<ghost_word.length; i++) {
					var consonent_number=0;
					if (Hangul.isConsonant(ghost_word[i])==true) {
						consonent_number++;
					}
				}
				console.log(consonent_number);
				// 두번째 자음이 없는 경우
				if (consonent_number===0) {
					var first = ghost_word.shift();
					var result = [first];
					result=result.concat(ghost_word);
					result.push('ㅎ');
					result=result.concat(ghost_word);
					console.log(result);
				}
				// 두번째 자음이 있는 경우
				else {
					var first = ghost_word.shift(); //ㅅ
					var last = ghost_word.pop(); //ㅇ
					var result = [first];
					result = result.concat(ghost_word); // ㅅ+ㅡ
					result.push('ㅎ'); // ㅅ+ㅡ+ㅎ
					result = result.concat(ghost_word); //ㅅ+ㅡ+ㅎ+ㅡ
					result.push(last);
				}
				console.log(result);
			return Hangul.assemble(result);
		}).join('');

		};


		$(function(){
			$('button').click(function(){
				console.log(ghost($('.ghost').val())); // .femme를 실행하고 그 값을 console에 찍어라
				$('.result').text(ghost($('.ghost').val()));
			});
		});
	</script>
</body>
</html>